
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-aFq/bzH65dt+w6FI2ooMVUpc+21e0SRygnTpmBvdBgSdnuTN7QbdgL+OapgHtvPp" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/js/bootstrap.bundle.min.js" integrity="sha384-qKXV1j0HvMUeCBQ+QVp7JcfGl760yU08IQ+GpUo5hlbpg51QRiuqHAJz8+BrxE/N" crossorigin="anonymous"></script>
    </script>
  <%- include('../components/navbar') %>

<title>View</title>


<body>

<div class="container mt-5  ">
<div class="row d-flex justify-content-center align-items-center">
    <div class="col-md-8  border border-white p-4 rounded bg-white" >
      <form >
        <div class="form-row">
          
          <div class="form-group col-md-5">
            <label for="inputEmail4">Gun Type</label>
            <input type="text" class="form-control" id="Gtype" name="Gtype" autocomplete="Gtype" value="<%= data.Gtype %>" required min="4" pattern="^[A-Z][a-zA-Z]*$">
          </div>

          <div class="form-group col-md-5">
            <label for="inputEmail4">Gun Name</label>
            <input type="text" class="form-control"  id="Gname" name="Gname" autocomplete="Gname" value="<%= data.Gname %>" required min="4" pattern="^[A-Z][a-zA-Z]*$">
          </div>

          <div class="form-group col-md-5">
            <label for="inputEmail4">Caliber</label>
            <input type="text" class="form-control" id="caliber" name="caliber" autocomplete="caliber" value="<%= data.caliber %>" required>
          </div>

          <div class="form-group col-md-5">
            <label for="inputEmail4">Serial Number</label>
            <input type="text" class="form-control" id="serialN" name="serialN" autocomplete="serialN" value="<%= data.serialN %>" required min="4">
          </div>

          <div class="form-group col-md-5">
            <label for="inputEmail4">Cost</label>
            <input type="text" class="form-control" id="cost" name="cost" autocomplete="cost" value="<%= data.cost %>" required min="4">
          </div>

          <div class="form-group col-md-5">
            <label for="inputEmail4">Acquisition date</label>
            <input type="date" class="form-control" id="acquisition" name="acquisition" value="<%= data.acquisition %>" required>
          </div>

          <div class="form-group col-md-5">
            <label for="inputEmail4">Check-in</label>
            <input type="date" class="form-control" id="turnOver" name="turnOver" autocomplete="turnOver" value="<%= data.turnOver %>" required min="4">
          </div>

          <div class="form-group col-md-5">
            <label for="inputEmail4">Check-out</label>
            <input type="date" class="form-control" id="returned" name="returned" autocomplete="returned" value="<%= data.returned %>" required min="4">
          </div>

          <div class="form-group col-md-5">
            <label for="inputEmail4">Station</label>
            <input type="text" class="form-control" id="station" name="station" autocomplete="station" value="<%= data.station %>" required min="4" pattern="^[A-Z][a-zA-Z]*$">
          </div>

          <div class="form-group col-md-5">
            <label for="inputEmail4">Last Name</label>
            <input type="text" class="form-control" id="lastName" name="lastName" autocomplete="LastName" value="<%= data.lastName %>" required min="4" pattern="[a-zA-Z]+">
          </div>

          <div class="form-group col-md-5">
            <label for="inputPassword4">First Name</label>
            <input type="text" class="form-control" id="firstName" name="firstName" autocomplete="firstName" value="<%= data.firstName %>" required min="4" pattern="[a-zA-Z]+">
          </div>

          <div class="form-group col-md-5">
            <label for="inputPassword4">Middle Name</label>
            <input type="text" class="form-control" id="middleName" name="middleName" autocomplete="middleName" value="<%= data.middleName %>" required min="4" pattern="[a-zA-Z]+">
          </div>

          <div class="form-group col-md-5">
            <label for="inputPassword4">QLFR</label>
            <input type="text" class="form-control" id="QLFR" name="QLFR" autocomplete="QLFR" value="<%= data.QLFR %>" required min="4" pattern="[a-zA-Z]+">
          </div>

          <div class="form-group col-md-2">
            <label for="inputZip">Rank</label>
            <input type="text" class="form-control" id="rank" name="rank" value="<%= data.rank %>">
          </div>
        </div>

      
        
        <div class="qr-code">
          <img src="data:image/png;base64,<%= data.qrCode.toString('base64') %>" alt="QR Code" />
          <button id="downloadButton" class="btn btn-primary">Download QR Code</button>
        </div>
        

      </form>
    </div>
</div>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/js/bootstrap.bundle.min.js" integrity="sha384-qKXV1j0HvMUeCBQ+QVp7JcfGl760yU08IQ+GpUo5hlbpg51QRiuqHAJz8+BrxE/N" crossorigin="anonymous"></script>
<script>
  const downloadButton = document.getElementById("downloadButton");
  const qrCodeDataURL = document.querySelector(".qr-code img").getAttribute("src");
  const lastName = "<%= data.lastName %>";

  downloadButton.addEventListener("click", () => {
    const link = document.createElement("a");
    link.href = qrCodeDataURL;
    link.download = lastName + "-qr_code.png";
    link.click();
  });
</script>

</body>
</html>
        
