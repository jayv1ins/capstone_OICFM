<html>
  <script src="https://unpkg.com/@mongodb-js/charts-embed-dom"></script>
  <style>
  
  </style>
  <body>
    <h1>Select Date Range for Acquisition</h1>
    <form onsubmit="handleFilterSubmit(event)">
      <label for="startDate">Start Date:</label>
      <input type="date" id="startDate" name="startDate" required>
    
      <label for="endDate">End Date:</label>
      <input type="date" id="endDate" name="endDate" required>
  
      <button type="submit">Submit</button>
      <button type="reset">Reset</button>
    </form>
    <div id="dashboard-container"></div>
  </body>

  <script>
    const ChartsEmbedSDK = window.ChartsEmbedSDK;

    const sdk = new ChartsEmbedSDK({
      baseUrl: "https://charts.mongodb.com/charts-project-0-omorz",
    });

    const dashboard = sdk.createDashboard({
      dashboardId: "9e31c7ce-8d96-442f-bec2-cf8cf2a517e6"
    });

    dashboard.render(document.getElementById("dashboard-container"));

    function handleFilterSubmit(event) {
      event.preventDefault();
      const startDate = document.getElementById("startDate").value;
      const endDate = document.getElementById("endDate").value;
      
      if (startDate && endDate) {
        dashboard.setFilter({ 
          $and: [
            { acquisition: { $gte: startDate } },
            { acquisition: { $lte: endDate } }
          ]
        });
      } else {
        // If either start date or end date is not selected, remove the filter
        dashboard.setFilter({});
      }
    }
  </script>
</html>
